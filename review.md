# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
SELECT * FROM todos;

### Todoモデルのallメソッドの返り値は何か
todosテーブルのレコード情報全てをまとめたCollectionクラスのインスタンスです。
todosテーブルにあるレコード1つ1つがTodoインスタンスとなり、それらが配列として格納されています。

### 配列の代わりにCollectionクラスを使用するメリットは
可読性が向上する事とクラスであることからメソッドの利用が容易である事が挙げられます。

### view関数の第1・第2引数の指定と何をしているか
第1引数： Viewとして表示したいファイルを指定。今回の場合bladeファイルを指定し、メソッドが実行された時のページ遷移を担っています。
第2引数： 第1引数で指定したファイルへ引き渡したい値を指定。この関数を用いる事でControllerからbladeファイルへ値を渡す事が可能になります。

### index.blade.phpの$todos・$todoに代入されているものは何か
$todos: todosテーブルから取得した全レコードをまとめた配列型のインスタンス
$todo: $todosにあるTodoインスタンスを1つずつ取り出したもの

## Todo作成機能

### Requestクラスのallメソッドは何をしているか
入力フォームから送信される値を一括で取得し、自動で連想配列を生成しています。

### fillメソッドは何をしているか
フォームから送られてくるデータ(連想配列)を一括でTodoインスタンスの各プロパティに代入しています。

### $fillableは何のために設定しているか
fillメソッドの脆弱性を防ぐためです。

fillメソッドは入力された値とその項目を含んだデータを一括で連想配列として生成しますが、ユーザが開発者ツール等で入力項目を増やした上で値を送信すると、
その値と項目も含めた連想配列が生成されてしまいます。

これを利用されると本来ユーザが編集出来ない項目にも値が入力・更新される可能性があるという脆弱性があります。
これを防ぐにはユーザが入力できる項目と本来ユーザが編集出来ない項目を設定しておく必要があります。

そこでfiilableで「ユーザが編集可能」である項目を設定し、ここに設定されていない項目はユーザが編集出来ない状態にしています。

### saveメソッドで実行しているSQLは何か
INSERT INTO todos($todoのキー) VALUES ($todoのキーに対応した値);

### redirect()->route()は何をしているか
予めルート定義したファイルへのリダイレクトをしています。

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
SQLを知らない開発者がいてもPHPコードでテーブル操作が出来る点、ファイルをGitで共有することで共有者全員が同じ構成のテーブルを作成出来るため現在のDBの状況が共有しやすい点がメリットとして挙げられます。

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
up(): php artisan migrate
down(): php artisan migrate:rollback

### Seederクラスの役割は何か
テストデータの作成です。各カラムとその値およびそれらをテーブルへ投入する処理を実装しています。これを実行することでテストデータが一括で作成出来ます。

### route関数の引数・返り値・使用するメリット
引数：　予め定義したルートのルート名
返り値：　引数に設定したルートのURLの文字列

メリット：
URLの記述が簡潔になることで可読性が向上します。
またURLに修正があってもルート名に変更がなければ、直接URLを記述したファイルでのみ修正すれば良いため保守性が上がります。

### @extends・@section・@yieldの関係性とbladeを分割するメリット
@extendsは引数に指定したbladeの継承を担います。
継承関係にあるbladeにおいて、子blade内の@section(および@endsection)で囲んだ部分を親bladeで記述した@yield部分に挿入することが出来ます。

分割するメリット：
保守性が向上します。
複数のbladeにて重複しているコードがある場合、その部分を分割し、一つのbladeにまとめてから他bladeで再利用する事により保守性が向上します。

### @csrfは何のための記述か
CSRF攻撃を防ぐため、トークン生成を行う記述です。生成したトークンを含めたデータをフォーム送信するとLaravel側でトークンの照合を自動で行い攻撃を防いでいます。

### {{ }}とは何の省略系か
htmlspecialchars()